{% extends 'base.html' %}
{% block content %}
  <title>今月のデータ</title>

  <style>
     .table {
       width: 100%;
       max-width: 100%;
       margin-bottom: 1rem;
       border-collapse: collapse;
     }
     
     .table th,
     .table td {
       padding: 0.75rem;
       vertical-align: top;
       border-top: 1px solid #dee2e6;
       text-align: center;
       text-align: right;
     }

     .btn {
       padding: 0.375rem 0.75rem;
       font-size: 1rem;
       line-height: 1.5;
       border-radius: 0.25rem;
     }

     .btn-sm {
       padding: 0.25rem 0.5rem;
       font-size: 0.875rem;
     }

     .table th,
     .table td,
     .btn {
       white-space: nowrap; /* テキストを折り返さないようにする */
       overflow: hidden; /* オーバーフローした内容を非表示にする */
       text-overflow: ellipsis; /* オーバーフローした内容を省略記号で表示 */
     }
  </style>


  <div class="container">
    <h2 class="text-center mb-4">今月の収支画面</h2>

    <h4>今月のデータ</h4>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>日付</th>
          <th>名前1</th>
          <th>名前2</th>
          <th>収入</th>
          <th>家賃</th>
          <th>水道代</th>
          <th>ガス代</th>
          <th>電気代</th>
          <th>食費</th>
          <th>通信費</th>
          <th>交通費</th>
          <th>保険代</th>
          <th>日用品</th>
          <th>医療費</th>
          <th>交際費</th>
          <th>貯金</th>
          <th>その他</th>
          <th>編集</th>
          <th>削除</th>
        </tr>
      </thead>
      <tbody>
      {% load humanize %}
        {% for balance in balance_list %}
          {% with balance_date=balance.event_date|date:"Y-m" %}
            {% if balance_date == now|date:"Y-m" %}
              <tr>
                <td>{{ balance.event_date | date:"n月 j日" }}</td>
                <td>{{ balance.name_1 }}</td>
                <td>{{ balance.name_2 }}</td>
                <td>{{ balance.income }}</td>
                <td>{{ balance.rent }}</td>
                <td>{{ balance.water_supply }}</td>
                <td>{{ balance.gas }}</td>
                <td>{{ balance.electricity }}</td>
                <td>{{ balance.food_expenses }}</td>
                <td>{{ balance.communication_expenses }}</td>
                <td>{{ balance.transportation_expenses }}</td>
                <td>{{ balance.insurance_fee }}</td>
                <td>{{ balance.daily_necessities }}</td>
                <td>{{ balance.medical_bills }}</td>
                <td>{{ balance.entertainment_expenses }}</td>
                <td>{{ balance.saving }}</td>
                <td>{{ balance.add_item }}</td>
                <td><a href="{% url 'household_budget:edit' balance.id %}" class="btn btn-primary btn-sm">編集</a></td>
                <td><a href="{% url 'household_budget:delete' balance.id %}" class="btn btn-danger btn-sm">削除</a></td>
              </tr>
            {% endif %}
          {% endwith %}
        {% endfor %}
      </tbody>
    </table>
    <div class="d-flex justify-content-start mt-3">
    <a href="{% url 'accounts:user' %}" class="btn btn-secondary ml-2">戻る</a>
    </div>
  </div>
{% endblock %}
